"use strict";angular.module("minionsManagedNgApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).otherwise({redirectTo:"/"})}]),angular.module("minionsManagedNgApp").controller("MainCtrl",["$scope","mmApi",function(a,b){a.workerTypes=["gecko-t-win7-32","gecko-t-win7-32-gpu","gecko-t-win10-64","gecko-t-win10-64-gpu","gecko-1-b-win2012","gecko-2-b-win2012","gecko-3-b-win2012"],a.dataCenters=["use1","use2","usw1","usw2","euc1"],a.selected={workerType:a.workerTypes[0],dataCenter:a.dataCenters[0]},a.loading=!0,b.query({},function(b){a.counts={},a.workerTypes.forEach(function(c){a.counts[c]={count:0},a.dataCenters.forEach(function(d){a.counts[c][d]=b.filter(function(a){return a.workerType==c&&a.dataCenter==d}).length,a.counts[c].count+=a.counts[c][d]})}),a.allMinions=b,a.minions=b.filter(function(b){return b.workerType==a.selected.workerType}),a.loading=!1}),a.getData=function(){a.loading=!0,a.minions=a.allMinions.filter(function(b){return b.workerType==a.selected.workerType}),a.loading=!1}}]),angular.module("minionsManagedNgApp").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("minionsManagedNgApp").factory("mmApi",["$resource",function(a){return a("http://ec2-52-90-242-185.compute-1.amazonaws.com/minions/alive",{},{query:{isArray:!0}})}]),angular.module("minionsManagedNgApp").run(["$templateCache",function(a){a.put("views/about.html","<p>This is the about view.</p>"),a.put("views/main.html",'<ul class="nav nav-tabs"> <li ng-repeat="workerType in workerTypes" ng-class="{active: workerType === selected.workerType}"> <a ng-click="selected.workerType=workerType;getData()">{{workerType}}</a> </li> </ul> <div ng-show="loading" class="spinner"> <div class="cube1"></div> <div class="cube2"></div> </div> <div ng-repeat="workerType in workerTypes" ng-show="!loading && workerType === selected.workerType && counts[workerType].count"> <div ng-repeat="dataCenter in dataCenters" class="clearfix" ng-show="counts[workerType][dataCenter]"> <h3>{{dataCenter}} ({{counts[workerType][dataCenter]}})</h3> <div class="clearfix col-sm-2" ng-repeat="minion in minions | filter: { workerType: workerType, dataCenter: dataCenter }"> <div class="panel" ng-class="{\n      \'panel-default\': (minion.tasks.length === 0 && (minion.restarts.length - minion.tasks.length) < 2),\n      \'panel-info\': (minion.tasks.length > 0 && (minion.restarts.length - minion.tasks.length) < 2),\n      \'panel-warning\': ((minion.restarts.length - minion.tasks.length) === 2),\n      \'panel-danger\': ((minion.restarts.length - minion.tasks.length) > 2)\n    }"> <div class="panel-heading"> <h4 class="panel-title"> <a style="cursor: pointer" ng-click="minion.showbody=!minion.showbody">{{minion._id.replace(\'0000000\', \'i-\')}}</a> tasks: {{minion.tasks.length}}, restarts: {{minion.restarts.length}} </h4> </div> <div class="panel-body" ng-show="minion.showbody"> <ul> <li>ip: {{minion.ipAddress}}</li> <li>created: {{minion.created}}</li> <li> <a style="cursor: pointer" ng-click="minion.showtasks=!minion.showtasks">tasks ({{minion.tasks.length}})</a> <ul ng-show="minion.tasks.length && minion.showtasks"> <li ng-repeat="task in minion.tasks"> <a href="https://tools.taskcluster.net/task-inspector/#{{task.id}}">{{task.id}}</a> </li> </ul> </li> <li> <a style="cursor: pointer" ng-click="minion.showrestarts=!minion.showrestarts">restarts ({{minion.restarts.length}})</a> <ul ng-show="minion.restarts.length && minion.showrestarts"> <li ng-repeat="restart in minion.restarts"> {{restart.time}} {{restart.comment}} </li> </ul> </li> </ul> </div> </div> </div> </div> </div>')}]);